<!DOCTYPE html>
<html>
<head>
	<title>이미지로 보는 Git 개념서 - 현록</title>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="shortcut icon" href="../../../common/resources/ico/Blackdeer.ico">
	<link rel="icon" href="../../../common/resources/ico/Blackdeer.ico">
	<meta property="og:title" content="이미지로 보는 Git 개념서 - 현록">
	<meta property="og:description" content="이미지로 보는 Git 개념서 - 현록">
	<meta property="og:image" content="https://blackdeery.github.io/common/resources/img/Blackdeer.png">
	<meta property="msapplication-TileColor" content="#000000">
	<meta property="msapplication-TileImage" content="https://blackdeery.github.io/common/resources/img/Blackdeer.png">
	<link rel="apple-touch-icon-precomposed" href="../../../common/resources/img/Blackdeer.png">
	
	<!-- Latest compiled and minified CSS -->
	<link id="themeCSS" rel="stylesheet" href="../../../common/resources/css/bootstrap_slate.min.css" media="all">
	
	<!-- Web Fonts -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

	<!-- Latest compiled and minified JavaScript -->
	<script src="../../../common/resources/js/jquery-3.4.1.min.js"></script>
	<script src="../../../common/resources/js/popper.min.js"></script>
	<script src="../../../common/resources/js/bootstrap-v.4.3.1.min.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../custom.css">
</head>
<body>
	<div id="div-content" class="container-fluid">
        <p>&nbsp;</p>
        <p>
            [fetch 및 pull(fetch+merge)]
        </p>
        <p>
            <img src="09_01.gif">
        </p>
        <p>&nbsp;</p>
        <p>
            리모트의 최신 상태를 로컬로 가져오거나(fetch),
        </p>
        <p>
            가져와서 로컬의 상태에 적용까지 시킨다(pull=fetch+merge).
        </p>
        <p>&nbsp;</p>
        <hr>
        <p>&nbsp;</p>
        <p>
            <span class="cmd">
                <span class="caret">&gt;</span> git &nbsp; fetch
            </span>
        </p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; fetch
            </p>
            <hr>
            <p class="response">
                <span class="comment">(최신 상황과 일치하면 응답은 없음)</span>
            </p>
        </div>
        <p>
            사실, <span class="cmd">git fetch</span>는 얼마든지 자주 사용해도 된다.
        </p>
        <p>
            fetch는 정보만 받아올 뿐, 직접 파일에 반영시키는 것은 아니기 때문.
        </p>
        <p>&nbsp;</p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; push
            </p>
            <hr>
            <p class="response">
                &nbsp;!&nbsp;[rejected]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a01 -> a01 (fetch first)
            </p>
            <p class="response">
                error: failed to push some refs to 'https://github.com/BlackdeerY/example.git'
            </p>
        </div>
        <p>
            push 전에 fetch를 먼저 하라고 거부될 때가 있다.
        </p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; fetch
            </p>
            <hr>
            <p class="response">
                remote: Enumerating objects: 4, done.
            </p>
            <p class="response">
                remote: Counting objects: 100% (4/4), done.
            </p>
            <p class="response">
                remote: Compressing objects: 100% (2/2), done.
            </p>
            <p class="response">
                remote: Total 3 (delta 0), reused 3 (delta 0), pack-reused 0
            </p>
            <p class="response">
                Unpacking objects: 100% (3/3), done.
            </p>
            <p class="response">
                From https://github.com/BlackdeerY/example
            </p>
            <p class="response">
                &nbsp;&nbsp;&nbsp;831de53..aa4b9a1&nbsp;&nbsp;a01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-> origin/a01<span class="comment">&lt;---- 변동 정보가 있는 리모트브랜치</span>
            </p>
        </div>
        <p>
            <span class="cmd">git fetch</span>로 최신 정보를 받아온다.
        </p>
        <p>&nbsp;</p>
        <p>
            push가 거부되었던 경우에는, fetch 후에 <span class="cmd">git checkout</span>을 해보면
        </p>
        <p>
            최신(up to date)이 아니라 좀 다른 상태로 얘기해준다.
        </p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; checkout
            </p>
            <hr>
            <p class="response">
                Your branch and 'origin/a01' have diverged,
            </p>
            <p class="response">
                and have 1 and 1 different commits each, respectively.
            </p>
            <p class="response">
                &nbsp;&nbsp;(use "git pull" to merge the remote branch into yours)
            </p>
        </div>
        <p>
            <img src="09_01.gif">
        </p>
        <p>
            다른 누군가가 해당 브랜치에 커밋을 진행시켜서,
        </p>
        <p>
            브랜치가 다른 쪽의 경로와 내 경로가 여러 길로 생겨버린
        </p>
        <p>
            <span class="color-yellow">분기가 발생(diverged)</span>한 경우도 있고,
        </p>
        <p>&nbsp;</p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; checkout
            </p>
            <hr>
            <p class="response">
                Your branch is behind 'origin/a01' by 1 commits, and can be fast-forwarded.
            </p>
            <p class="response">
                &nbsp;&nbsp;(use "git pull" to update your local branch)
            </p>
        </div>
        <p>
            <img src="09_02.gif">
        </p>
        <p>
            그냥 리모트보다 뒤쳐진 상태라(로컬만의 커밋이 없어서)
        </p>
        <p>
            <span class="color-yellow">빨리감기(fast-forward)</span>로 HEAD만 옮기는 것으로 해결되는 경우도 있다.
        </p>
        <p>&nbsp;</p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; branch &nbsp; <span class="color-yellow">-vv</span>
            </p>
            <hr>
            <p class="response">
                *&nbsp;<span class="color-my-green">a01</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4633d22 [<span class="color-my-blue">origin/a01</span>: behind 1] commit comment<span class="comment">&lt;---- 리모트보다 1 뒤쳐짐 (pull 해야함)</span>
            </p>
            <p class="response">
                &nbsp;&nbsp;c01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ea2e881 [<span class="color-my-blue">origin/c01</span>: ahead 1] commit comment<span class="comment">&lt;---- 리모트보다 1 앞섬 (push 해야함)</span>
            </p>
            <p class="response">
                &nbsp;&nbsp;main&nbsp;&nbsp;&nbsp;&nbsp;7dd19e8 [<span class="color-my-blue">origin/main</span>] commit comment<span class="comment">&lt;---- 리모트와 동일함</span>
            </p>
            <p class="response">
                &nbsp;&nbsp;test1&nbsp;&nbsp;&nbsp;b1bcce7 [<span class="color-my-blue">origin/test1</span>: ahead 2, behind 1] commit comment<span class="comment">&lt;---- 리모트보다 1 뒤쳐진 곳에서 분기하여 2만큼 커밋 존재 (병합필요)</span>
            </p>
            <p class="response">
                &nbsp;&nbsp;test2&nbsp;&nbsp;&nbsp;b1bcce7 commit comment<span class="comment">&lt;---- 아직 리모트와 연동되지 않은 오직 로컬 상태</span>
            </p>
        </div>
        <p>
            <span class="cmd">git branch <span class="color-yellow">-vv</span></span>로 전체 브랜치의 리모트 상황을 비교할 수 있다.
        </p>
        <p>&nbsp;</p>
        <p>
            이제 fetch로 받아온 정보를 로컬의 상태에 적용시키면서, 리모트와 달라져버린 상태를 해결해보자.
        </p>
        <p>
            <span class="cmd">git merge</span>로 해결할 수 있다. merge는 커밋끼리(같은 브랜치든 다른 브랜치든) <span class="color-yellow">병합시킨 커밋을 생성</span>하는 명령어이다.
        </p>
        <p>
            <span class="cmd">git pull</span>은 fetch+merge하는 동작이라, fetch를 했으니 merge만으로도 되지만, pull로 처리해도 상관없다.
        </p>
        <p class="hang1 color-gray">
            (이 작업에서의 의미적으론 pull이 더 맞다. 위의 checkout 응답에서도 계속해서 git pull로 얘기하고 있다.)
        </p>
        <p>&nbsp;</p>
        <hr>
        <p>&nbsp;</p>
        <p>
            어떤 상황이든 <span class="cmd">git merge</span>만으로 자동 병합을 시도하고, 자동으로 처리가 가능하면 수월하게 완료된다.
        </p>
        <p>&nbsp;</p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; merge
            </p>
            <hr>
            <p class="response">
                Updating 7ccd23b..0bdcb3c
            </p>
            <p class="response">
                Fast-forward<span class="comment">&lt;---- fast-forward로 처리됨</span>
            </p>
            <p class="response">
                &nbsp;004.txt | 1 +
            </p>
            <p class="response">
                &nbsp;1 file changed, 1 insertion(+)
            </p>
        </div>
        <p>
            <img src="09_02.gif">
        </p>
        <p>
            fast-forward는 간단하게 merge되었다.
        </p>
        <p>
            내가 올려버릴 나만의 로컬 커밋이 아예 없었으니, 이대로 해결이 끝났다.
        </p>
        <p>
            <span class="cmd">git checkout</span>을 해봐도 최신(up to date)으로 말끔하게 상황 종료.
        </p>
        <p>
            fast-forward 경우는 병합할 것 없이, 그냥 리모트의 최신 상태를 가져와서 깔끔하게 적용된 것.
        </p>
        <p>&nbsp;</p>
        <hr>
        <p>&nbsp;</p>
        <p>
            그러면 <span class="color-yellow">분기가 발생된(diverged)</span> 상황을 보자.
        </p>
        <p>&nbsp;</p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; merge
            </p>
            <hr>
            <p class="response">
                Merge made by the 'recursive' strategy.
            </p>
            <p class="response">
                &nbsp;004.txt | 0
            </p>
            <p class="response">
                &nbsp;1 file changed, 0 insertions(+), 0 deletions(-)
            </p>
            <p class="response">
                &nbsp;create mode 100644 004.txt
            </p>
        </div>
        <p>
            갈려나온 분기들을 병합(merge)하는 커밋을 생성하는데,
        </p>
        <p>
            이 커밋들을 합쳤을 때, 딱히 같은 곳을 건드리지 않는다면 별 문제 없이 자동으로 병합된다.
        </p>
        <p class="hang1 color-gray">
            (분기된 경로에서 같은 파일을 건드리지 않는다면 손쉽게 합쳐진다.)
        </p>
        <p>
            병합된 커밋만을 생성한 것이므로, 이 커밋은 로컬에만 존재한다. 필요하면 push한다.
        </p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; push
            </p>
            <hr>
            <p class="response">
                Enumerating objects: 9, done.
            </p>
            <p class="response">
                Counting objects: 100% (8/8), done.
            </p>
            <p class="response">
                Delta compression using up to 8 threads
            </p>
            <p class="response">
                Compressing objects: 100% (4/4), done.
            </p>
            <p class="response">
                Writing objects: 100% (5/5), 602 bytes | 602.00 KiB/s, done.
            </p>
            <p class="response">
                Total 5 (delta 0), reused 0 (delta 0)
            </p>
            <p class="response">
                To https://github.com/BlackdeerY/example.git
            </p>
            <p class="response">
                &nbsp;&nbsp;&nbsp;aa4b9a1..7651d26  a01 -> a01
            </p>
        </div>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; log
            </p>
            <hr>
            <p class="response">
                <span class="color-my-gold">commit 7651d26b91fac3fa0a13cbaca5fd2d249585f91a (<span class="color-my-blue">HEAD -&gt;</span> <span class="color-my-green">a01</span>, <span class="color-my-red">origin/a01</span>)</span>
            </p>
            <p class="response">
                Merge: 54cd13d aa4b9a1<span class="comment">&lt;---- 54cd13d 커밋에서(주체) aa4b9a1 커밋을(대상) 병합함</span>
            </p>
            <p class="response">
                Author: USER &lt;email@address.com&gt;
            </p>
            <p class="response">
                Date:   EEE MMM dd HH:mm:ss yyyy +0900
            </p>
            <p class="response">
                &nbsp;
            </p>
            <p class="response">
                &nbsp;&nbsp;&nbsp;&nbsp;Merge remote-tracking branch 'refs/remotes/origin/a01' into a01<span class="comment">&lt;---- 병합하면서 자동으로 생성된 코멘트</span>
            </p>
            <p class="response">
                ...
            </p>
        </div>
        <p>&nbsp;</p>
        <hr>
        <p>&nbsp;</p>
        <p>
            <span class="color-yellow">충돌(conflict)</span>이 존재하여 자동으로 병합되지 않는 경우도 보자.
        </p>
        <p>&nbsp;</p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; merge
            </p>
            <hr>
            <p class="response">
                Auto-merging 001.txt
            </p>
            <p class="response">
                CONFLICT (content): Merge conflict in 001.txt<span class="comment">&lt;---- 충돌(conflict)이 존재</span>
            </p>
            <p class="response">
                Automatic merge failed; fix conflicts and then commit the result.
            </p>
        </div>
        <p>
            충돌(conflict)이 존재하여 자동 병합이 실패하여 <span class="color-yellow">병합 커밋 생성이 중지된 상황</span>이다.
        </p>
        <p>
            해당 파일들을 직접 텍스트 에디터로 열어보자.
        </p>
        <div class="cmd">
            <p>
                <span class="color-my-gold">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD (지금_내_커밋ID)</span>
            </p>
            <p>
                지금_내_내용
            </p>
            <p>
                지금_내_내용
            </p>
            <p>
                지금_내_내용
            </p>
            <p>
                <span class="color-my-gold">=======</span>
            </p>
            <p>
                병합할_반대편_내용
            </p>
            <p>
                병합할_반대편_내용
            </p>
            <p>
                병합할_반대편_내용
            </p>
            <p>
                <span class="color-my-gold">&gt;&gt;&gt;&gt;&gt;&gt;&gt; 병합할_반대편_커밋ID</span>
            </p>
        </div>
        <p>
            로컬과 리모트의 상태가 둘 다 보여지는데,
        </p>
        <p>
            쓸 것만 남겨둔 후 양식(<span class="cmd">&lt;&lt;&lt;&lt;&lt;&lt;&lt; ...</span>, <span class="cmd">=======</span>, <span class="cmd">&gt;&gt;&gt;&gt;&gt;&gt;&gt; ...</span>)을 지워준다.
        </p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; add &nbsp; 001.txt
            </p>
            <hr>
        </div>
        <p>
            해당 파일을 수정했으니, <span class="cmd">git add</span>로 최종본을 Stage시킨다.
        </p>
        <p class="hang1 color-gray">
            (자동 병합시 충돌이 없던 나머지 파일들은 이미 Stage되어있는 상태이다.)
        </p>
        <p>&nbsp;</p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; merge &nbsp; <span class="color-yellow">--continue</span>
            </p>
            <hr>
            <p class="response">
                [a01 b6aac9d] Merge remote-tracking branch 'refs/remotes/origin/a01' into a01
            </p>
        </div>
        <p>
            자동 병합에 실패하여 커밋 생성이 중지되었으니, <span class="cmd">git merge <span class="color-yellow">--continue</span></span>로 <span class="color-yellow">계속 진행하도록 해준다.</span>
        </p>
        <p class="hang1 color-gray">
            (<span class="cmd">git commit</span>으로 직접 커밋을 생성해도 상관 없다. merge를 중단하려면 <span class="cmd">git merge --abort</span>.)
        </p>
        <p>
            역시 병합된 커밋만을 생성한 것이므로, 이 커밋은 로컬에만 존재한다. 필요하면 push한다.
        </p>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; push
            </p>
            <hr>
            <p class="response">
                Enumerating objects: 10, done.
            </p>
            <p class="response">
                Counting objects: 100% (10/10), done.
            </p>
            <p class="response">
                Delta compression using up to 8 threads
            </p>
            <p class="response">
                Compressing objects: 100% (4/4), done.
            </p>
            <p class="response">
                Writing objects: 100% (6/6), 557 bytes | 557.00 KiB/s, done.
            </p>
            <p class="response">
                Total 6 (delta 0), reused 0 (delta 0)
            </p>
            <p class="response">
                To https://github.com/BlackdeerY/example.git
            </p>
            <p class="response">
                &nbsp;&nbsp;&nbsp;a056bf5..b6aac9d  a01 -> a01
            </p>
        </div>
        <div class="cmd">
            <p>
                <span class="caret">&gt;</span> git &nbsp; log
            </p>
            <hr>
            <p class="response">
                <span class="color-my-gold">commit b6aac9d92b478edf879bd94848de6a56c07d205e (<span class="color-my-blue">HEAD -&gt;</span> <span class="color-my-green">a01</span>, <span class="color-my-red">origin/a01</span>)</span>
            </p>
            <p class="response">
                Merge: 946a0d4 a056bf5<span class="comment">&lt;---- 946a0d4 커밋에서(주체) a056bf5 커밋을(대상) 병합함</span>
            </p>
            <p class="response">
                Author: USER &lt;email@address.com&gt;
            </p>
            <p class="response">
                Date:   EEE MMM dd HH:mm:ss yyyy +0900
            </p>
            <p class="response">
                &nbsp;
            </p>
            <p class="response">
                &nbsp;&nbsp;&nbsp;&nbsp;Merge remote-tracking branch 'refs/remotes/origin/a01' into a01
            </p>
            <p class="response">
                ...
            </p>
        </div>
        <p>&nbsp;</p>
        <hr>
        <p>&nbsp;</p>
        <p>
            <img src="09_02.gif">
        </p>
        <p>
            1. <span class="color-yellow">fast-forward</span>로 가능한 경우(로컬 커밋이 없고, 그냥 리모트 상태를 받아와서 적용만 하면 되는 경우)
        </p>
        <p class="hang1">
            : 그냥 <span class="cmd">git merge</span>(<span class="cmd">git pull</span>)만으로 해결된다.
        </p>
        <p>
            <img src="09_01.gif">
        </p>
        <p>
            2. 다른 누군가 리모트에 진행을 시켜서, 로컬의 진행 경로와 다르게 <span class="color-yellow">분기가 발생(diverged)</span>된 경우
        </p>
        <p class="hang1">
            2-1. 충돌(conflict) 없음: <span class="cmd">git merge</span>(<span class="cmd">git pull</span>)로 자동 병합되고, 필요하면 <span class="cmd">git push</span>.
        </p>
        <p class="hang1">
            2-1. <span class="color-yellow">충돌(conflict) 있음</span>: <span class="cmd">git merge</span>(<span class="cmd">git pull</span>) 후, 일부 조율. <span class="cmd">git add</span> 후 <span class="cmd">git merge --continue</span>로 병합 커밋 완결. 필요하면 <span class="cmd">git push</span>.
        </p>
        <p>&nbsp;</p>
        <hr>
        <p>&nbsp;</p>
        <p>
            ㆍfetch: 최신 정보를 받아오기만 함
        </p>
        <p>
            ㆍmerge: 병합 커밋을 생성
        </p>
        <p>
            ㆍpull: fetch+merge
        </p>
        <p>
            fetch는 정보만을 갱신하고, pull은 직접적으로 처리를 시도한다.
        </p>
        <p>&nbsp;</p>
        <p>
            <span class="cmd">git merge</span>는 충돌(conflict) 상황 뿐만 아니라, 다른 브랜치를 합칠 때에도 사용한다.
        </p>
        <p class="hang1 color-gray">
            (이 명령어는 "병합된 커밋을 생성"하는 것이니)
        </p>
        <p>
            <img src="../10_merge/10_01.gif">
        </p>
        <p>
            이제는 다른 브랜치의 병합 쪽을 보자. [merge 더 알아보기]
        </p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
	</div>
</body>
</html>